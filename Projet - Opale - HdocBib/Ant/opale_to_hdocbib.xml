<?xml version="1.0" encoding="UTF-8"?>
<project basedir=".." name="main" default="convert">
    <property name="InputPath" value="${basedir}/source/ex.scar"></property>
    <property name="OutputPath" value="${basedir}/result/result.xml"></property>
    <target name="preparation">
        <delete dir="${basedir}/result"></delete>
        <delete dir="${basedir}/tmp"></delete>
        <mkdir dir="${basedir}/result"></mkdir>
        <mkdir dir="${basedir}/tmp"></mkdir>
        <mkdir dir="${basedir}/tmp/source"></mkdir>
        <unzip src="${InputPath}" dest="${basedir}/tmp/source"/>
    </target>
    
    
    <target name="createxml" depends="preparation">
        <xslt 
            classpath="${basedir}/lib/saxon9ee.jar"
            in="${basedir}/base.xml"
            out="${basedir}/tmp/tmp.xml" 
            xslresource="${basedir}/XSL/getOneDoc.xsl">
        </xslt>
    </target>
    
    
    <target name="convert" depends="createxml">
        <xslt 
            classpath="${basedir}/lib/saxon9ee.jar"
            in="${basedir}/tmp/tmp.xml"
            out="${OutputPath}" 
            xslresource="${basedir}/XSL/OpaleHdoc.xsl"></xslt>
        
    </target>
    
</project>